# Treasure: A TUI Roguelike Adventure

## 1. 게임 개요

`Treasure`는 터미널 환경에서 즐기는 텍스트 기반의 로그라이크 던전 탐험 게임입니다. 플레이어는 절차적으로 생성되는 미로 같은 던전을 탐험하며, 몬스터와 싸우고, 보물을 찾아 성장해야 합니다. 이 게임의 목표는 죽지 않고 던전 가장 깊은 곳에 숨겨진 전설의 보물 'Yendor의 목걸이'를 찾아 탈출하는 것입니다.

## 2. 핵심 기능

*   **절차적 던전 생성 (Procedural Dungeon Generation)**: 게임을 시작할 때마다 매번 다른 구조의 던전이 생성됩니다.
*   **턴제 게임 플레이 (Turn-Based Gameplay)**: 플레이어가 행동하면 게임 세계(몬스터 등)도 한 턴을 진행합니다.
*   **캐릭터 성장 (Character Progression)**: 몬스터를 사냥하여 경험치를 얻고 레벨업을 통해 능력치(HP, 공격력, 방어력)를 향상시킬 수 있습니다.
*   **아이템과 장비 (Items & Equipment)**: 던전 곳곳에서 무기, 방어구, 포션 등 다양한 아이템을 발견하고 사용할 수 있습니다.
*   **텍스트 기반 인터페이스 (Text-based User Interface)**: 모든 그래픽은 아스키(ASCII) 문자로 표현되어, 클래식한 로그라이크의 감성을 느낄 수 있습니다.
    *   `@`: 플레이어
    *   `.`: 던전 바닥
    *   `#`: 벽
    *   `g`: 고블린 (Goblin)
    *   `O`: 오크 (Orc)
    *   `+`: 문
    *   `*`: 포션
    *   `/`: 무기
    *   `]`: 방어구

## 3. 기술 설계 및 아키텍처

이 게임은 여러 독립적인 모듈의 조합으로 구성됩니다.

### 가. 게임 루프 (Game Loop)

게임의 핵심 엔진으로, 다음 순서로 계속해서 순환합니다.

1.  **화면 렌더링**: 현재 게임 상태(지도, 플레이어, 몬스터, 아이템)를 화면에 그립니다.
2.  **사용자 입력 대기**: 플레이어의 키 입력을 기다립니다.
3.  **게임 상태 업데이트**:
    *   플레이어의 행동(이동, 공격 등)을 처리합니다.
    *   몬스터의 인공지능(AI)에 따라 몬스터를 행동시킵니다. (예: 플레이어 추적)
4.  **1번으로 돌아가 반복**

### 나. 던전 생성기 (Dungeon Generator)

*   2차원 배열 `List<List<Tile>>`을 사용하여 맵을 표현합니다.
*   **Random Walk** 또는 **Cellular Automata** 같은 알고리즘을 사용하여 동굴 같은 자연스러운 미로를 생성합니다.
*   생성된 맵에 몬스터, 아이템, 그리고 던전의 입구와 출구를 배치합니다.

### 다. 엔티티 (Entities)

게임 세계에 존재하는 모든 객체(플레이어, 몬스터, 아이템)는 '엔티티' 클래스를 상속받습니다.

*   **`Entity`**: 위치(x, y), 이름, 화면에 표시될 문자(character)를 가집니다.
*   **`Actor`**: `Entity`를 상속하며, HP, 공격력, 방어력 등 전투 능력치를 가집니다.
    *   **`Player`**: 플레이어. `Actor`를 상속하며, 추가로 경험치(XP)와 인벤토리를 가집니다.
    *   **`Monster`**: 몬스터. `Actor`를 상속하며, 간단한 행동 AI를 가집니다.
*   **`Item`**: 아이템. `Entity`를 상속하며, 사용 시 특정 효과를 발동시킵니다.

### 라. 렌더링 엔진 (Rendering Engine)

*   게임 상태 데이터를 받아 터미널에 아스키 문자로 출력합니다.
*   매 턴마다 화면을 깨끗이 지우고 전체 맵을 다시 그리는 방식으로 작동합니다.
*   화면 하단에는 플레이어의 상태(HP, 레벨 등)와 게임 로그(예: "플레이어가 고블린에게 5의 데미지를 입혔습니다.")를 표시하는 UI 영역을 둡니다.

### 마. 입력 핸들러 (Input Handler)

*   `w, a, s, d` 또는 방향키: 이동
*   `g`: 아이템 줍기 (get)
*   `i`: 인벤토리 열기 (inventory)
*   `a`: 공격 (attack) - 방향 지정 필요

## 4. 게임 메카닉

*   **전투**: 플레이어가 몬스터와 인접한 상태에서 해당 방향으로 이동/공격 시도 시 전투가 발생합니다. `데미지 = 공격자의 공격력 - 방어자의 방어력`과 같은 간단한 공식을 사용합니다.
*   **성장**: 몬스터를 처치하면 경험치를 얻습니다. 일정 경험치가 쌓이면 레벨이 오르고, 최대 HP, 공격력, 방어력이 상승합니다.
*   **영구적 죽음 (Permadeath)**: 플레이어의 HP가 0이 되면 게임이 종료되며, 저장된 진행 상황 없이 처음부터 다시 시작해야 합니다.

## 5. 개발 로드맵

### Phase 1: 기본 골격 구현 (MVP)

*   [x] 프로젝트 구조 설정 (`bin`, `lib`, `test`)
*   [ ] 고정된 맵(Fixed Map)에서 플레이어(`@`)가 움직이는 기능 구현
*   [ ] 간단한 게임 루프 및 화면 렌더링 기능

### Phase 2: 핵심 게임 플레이 구현

*   [ ] 절차적 던전 생성 기능 추가
*   [ ] 던전 내 몬스터 배치 및 기초적인 AI 구현 (플레이어 추적)
*   [ ] 플레이어와 몬스터 간의 전투 시스템 구현

### Phase 3: 성장과 탐험 요소 추가

*   [ ] 경험치 및 레벨업 시스템 구현
*   [ ] 아이템(포션, 무기, 방어구) 구현 및 인벤토리 시스템
*   [ ] 여러 층으로 구성된 던전과 층간 이동(계단) 기능

### Phase 4: 완성도 높이기

*   [ ] 다양한 종류의 몬스터와 아이템 추가
*   [ ] 함정, 비밀 문 등 특수 지형 추가
*   [ ] 최종 보스 및 게임 엔딩 구현

## 6. 실행 방법

1.  **의존성 설치**:
    ```bash
    dart pub get
    ```

2.  **게임 실행**:
    ```bash
    dart run bin/treasure.dart
    ```